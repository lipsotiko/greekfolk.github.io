import{g as o,s as d,a as _}from"./valueByPath.9afb6b32.js";import{u as A}from"./uid.f9fa3ea1.js";import{H as m,J as p,K as g,M as V,a as j,b as B,s as O,k as F,o as P,e as w,r as z,m as D,j as E}from"./entry.c55b7e60.js";import{F as x}from"./FormComponentMixin.f05ca13b.js";import{i as I}from"./isFunction.4cbd0f32.js";function s(e){if(Array.isArray(e)){const t=e.slice().map(s),r=Object.keys(t);return Object.keys(e).filter(n=>!r.includes(n)).forEach(n=>{t[n]=e[n]}),t}else if(typeof e=="object")return Object.keys(e).reduce((t,r)=>(t[r]=s(e[r]),t),{});return e}function N(e,t={}){const r=t.locale||"en-US",n=i=>{let a=String(i);return t.allowDashes&&(a=a.replace(/-/g,"")),t.allowSpaces&&(a=a.replace(/ /g,"")),a};return e.constructor===Array?e.every(i=>m[r].test(n(i))):m[r].test(n(e))}function C(e,t={}){const r=t.locale||"en-US",n=i=>{let a=String(i);return t.allowDashes&&(a=a.replace(/-/g,"")),t.allowSpaces&&(a=a.replace(/ /g,"")),a};return e.constructor===Array?e.every(i=>p[r].test(n(i))):p[r].test(n(e))}function R(e,t={validator:()=>!0}){return e.constructor===Array?e.every(r=>t.validator(r)):t.validator(e)}function M(e,t={allowNegative:!1,allowDecimal:!1}){let r="\\d+";t.allowNegative&&(r="[-]?"+r),t.allowDecimal&&(r+="([\\.\\,]\\d+)?");const n=new RegExp(`^${r}$`);return e.constructor===Array?e.every(i=>n.test(i)):n.test(e)}const h=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function G(e){return e.constructor===Array?e.every(t=>!t||h.test(String(t))):!e||h.test(String(e))}function K(e,t={value:0}){if(e==null)return!1;const r=n=>Number(n);return Array.isArray(e)?e.every(n=>r(n)<=t.value):r(e)<=t.value}function L(e,t={value:0}){return e==null?!1:e.constructor===Array?e.length<=t.value:typeof e=="object"?Object.keys(e).length<=t.value:String(e).length<=t.value}function U(e,t={value:0}){if(e==null)return!1;const r=n=>Number(n);return Array.isArray(e)?e.every(n=>r(n)>=t.value):r(e)>=t.value}function Z(e,t={value:0}){return e==null?!1:e.constructor===Array?e.length>=t.value:typeof e=="object"?Object.keys(e).length>=t.value:String(e).length>=t.value}function q(e,t={invalidateFalse:!1}){return e==null?!1:e.constructor===Array?!!e.length:typeof e=="boolean"?t.invalidateFalse?e:!0:!!String(e).trim().length}function H(e,t={}){if(!t.target)return!1;const r=o(t.schema(),t.target);if(!r)throw new Error(`Could not find target with name '${t.target}' in 'sameAs' validator.`);return e===r.value}const J={alpha:N,alphanumeric:C,custom:R,number:M,email:G,max:K,maxLength:L,min:U,minLength:Z,required:q,sameAs:H};function Q(e,t={}){const r=o(g.messages[g.locale],e),n=I(r)?r(t):r||e;return Object.keys(t).reduce((i,a)=>i.replace(new RegExp(`{${a}}`,"g"),`${t[a]}`),n)}function T(e,t=""){const r=[];return e.valid=(e.validators||[]).reduce((n,i)=>{const a=typeof i=="string"?{name:i}:i,l=J[a.name](e.value,a);if(!l){const{name:c,message:u,...$}=a,b={name:t.split(".").pop(),value:e.value,...$},S=(u instanceof Function?u():u)||Q(`validation.${c}`,b);r.push({name:c,message:S,path:t})}return n&&l},!0),e.invalid=!e.valid,e.errors=r,e}function v(e,t=""){return e.valid=Object.keys(e).filter(r=>!V.includes(r)).reduce((r,n)=>(Object.keys(e[n]).length===0||e[n].validators||e[n].value?e[n]=T(e[n],`${t}`?`${t}.${n}`:n):e[n]=v(e[n],`${t}`?`${t}.${n}`:n),r&&e[n].valid),!0),e.invalid=!e.valid,e}function f(e){return v(e,"")}const y="IForm",W=j({name:y,mixins:[x],provide(){return{form:this}},inheritAttrs:!1,props:{color:{type:String,default:""},disabled:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},name:{type:String,default(){return A("form")}},modelValue:{type:Object,default:()=>null},readonly:{type:Boolean,default:!1},size:{type:String,default:B(y,"size"),validator:O}},emits:["update:modelValue","submit"],computed:{classes(){return{...F(this),[`-${this.size}`]:Boolean(this.size),"-disabled":this.isDisabled,"-readonly":this.isReadonly,"-inline":this.inline}},schema(){return this.modelValue?this.modelValue:o(this.formGroup.schema||this.form.schema||{},this.name)}},methods:{onBlur(e,t){var r,n;if((n=(r=this.parent).onBlur)==null||n.call(r,this.name?`${this.name}.${e}`:e,t),this.modelValue){let i=s(this.modelValue);i=d(i,e,{untouched:!1,touched:!0}),this.shouldValidate(e,"blur")&&(i=f(i)),this.$emit("update:modelValue",i)}},onInput(e,t){var r,n;if((n=(r=this.parent).onInput)==null||n.call(r,this.name?`${this.name}.${e}`:e,t),this.modelValue){let i=s(this.modelValue);i=_(i,e,"value",t),i=d(i,e,{pristine:!1,dirty:!0}),this.shouldValidate(e,"input")&&(i=f(i)),this.$emit("update:modelValue",i)}},onSubmit(e){if(e.preventDefault(),this.modelValue){let t=s(this.modelValue);if(t=d(f(t),"",{untouched:!1,touched:!0}),this.$emit("update:modelValue",t),t.invalid)return}this.$emit("submit",e)},shouldValidate(e,t){const r=o(this.modelValue,e);return(r.validateOn?[].concat(r.validateOn):this.$inkline.options.validateOn).includes(t)}}}),X=["name","readonly","disabled"];function Y(e,t,r,n,i,a){return P(),w("form",D(e.$attrs,{class:["form",e.classes],role:"form",name:e.name,readonly:e.isReadonly,disabled:e.isDisabled,onSubmit:t[0]||(t[0]=(...l)=>e.onSubmit&&e.onSubmit(...l))}),[z(e.$slots,"default",{},void 0,!0)],16,X)}const ie=E(W,[["render",Y],["__scopeId","data-v-039d2d8e"]]);export{ie as default};
